#!/usr/bin/env coffee
_ = require 'pg-promise'
query = (e)->console.log e.query
pgp = _ {query}

{dbname, srid, schema} = require './arg-parser'

{QueryFile} = pgp
{readFileSync} = require 'fs'

db = pgp("postgresql:///#{dbname}")

params = {schema, srid}
procedure = QueryFile "#{__dirname}/db-fixtures/create-tables.sql", {params}

do ->
  try
    await db.query procedure
  catch err
    console.error err
  process.exit()
